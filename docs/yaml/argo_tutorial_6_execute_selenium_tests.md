# Tutorial 6: Running Nested Workflows

This tutorial shows how to use nested workflows to:

*   run a Selenium test against a web application ("Hello World") that runs in two web browsers (Chrome and Firefox)
*   record and output a video of screenshots taken during the test.

To run the test, you need a Selenium server, the web app to test, and the test code.

In this example, the first YAML file (**selenium_all_ax.yaml**) contains the information to run the test code and the second YAML file (**axvideo_tools.yaml**) has the information for converting the video output from a Flash format to an MPEG4 format.

Link to selenium_all_ax.yaml and axvideo_tools.yaml https://github.com/argoproj/example-selenium/tree/master/.argo

## Run Selenium test workflow

1.  Go to [https://github.com/argoproj/example-selenium](https://github.com/argoproj/example-selenium), which has the sample repository for the Selenium test.
2.  Review the `selenium_all_ax.yaml` file under the`.argo` folder in that repo. It has a top-level workflow, which is supported by several nested workflows to execute the job :

    *   top level workflow: `selenium-example-workflow` (Calls the nested workflows, which checks out code from the repo, and runs the Selenium test with video recording)
    *   nested workflow: `axscm-checkout`(checks out the Selenium test code from the repo)
    *   nested workflow: `selenium-test-video-workflow` (This child workflow runs the actual test and converts the output of the test workflow video from .flv format to .mp4 format)

    Every step in the workflow needs to be defined as a container specification and creates a Kubernetes job. For more details on the workflow and container YAML DSL please check the YAML tutorial at [Container Template](./../yaml/container_templates.md)

3.  Also review the `axvideo_tools.yaml` file, which defines the containers for the video apps used to record and convert the video of the Selenium test.
4.  Since your Argo installation is automatically integrated with [https://github.com/argoproj](https://github.com/argoproj) repo, you can view it in your Argo dashboard under Catalog menu item along with other samples
5.  Select Selenium Testing in the Catalog item and click Run to start the test with the nested workflows
6.  You will see the workflow running in Argo Web UI where every step is a container. You can check the log and artifact generated by clicking on each step.
7.  Once the workflow completes you will see a "Sampleapp" application deployed under Applications tab in Argo Web UI.

## Viewing the Test Outputs and Artifacts

You can view the video output of the Selenium test by going to the specific Job from the Timeline, clicking a container and selecting the icon for "**Download artifact video**":

To view a report, go to the E2E_TEST container and click "**Download artifact report**":

## Viewing Information for a Test Failure

When a test fails, you can view a report of the failure by clicking the container that has the red circle and selecting "**Browse artifact report**":

The dialog opens displaying the results and highlighting the lines that failed:

## Accessing the YAML Files for this Example

To see the YAML files for the Selenium test from the Argo Web UI, click **Catalog** > **DevOps** > **Selenium Testing.**

Or if you prefer to access the YAML templates from GitHub, go to [https://github.com/Argoproj/appstore](https://github.com/Argoproj/appstore) and click the .`argo` directory.

.
