# Tutorial 1: Create CI Workflow

This tutorial shows how to run a container-native, CI workflow on Kubernetes. You can see the Argo CI workflow for any Argo commit at [https://github.com/argoproj](https://github.com/argoproj)

## Run Argo Sample CI Workflow

1.  Go to [](https://github.com/argoproj)[https://github.com/argoproj/ci-workflow/](https://github.com/argoproj/ci-workflow/) to access the sample CI workflow repository
2.  Review the file at [https://github.com/argoproj/ci-workflow/blob/master/.argo/example-workflow-approval.yaml](https://github.com/argoproj/ci-workflow/blob/master/.argo/example-workflow-approval.yaml) under `.argo` folder in that repo.

    The workflow has steps that checkouts the code, builds the code, runs multiple tests in parallel, sends an approval email and releases the code. Every step in the workflow needs to be defined as a container specification and creates a Kubernetes job. For details about writing the YAML DSL see [Argo YAML DSL Reference](#/docs;doc=dsl_reference_intro.md).

3.  Because your Argo installation is automatically integrated with [https://github.com/argoproj](https://github.com/argoproj) repo, you can view it in your Argo Web UI in the Catalog along with other sample workflows and applications.
4.  Select CI Workflow from the Catalog and click Run to start the CI workflow.
5.  This workflow has a approval step that needs an email address as a mandatory input parameter called REQUIRED_APPROVALS. Enter an email address for an approver and click Submit.
6.  The workflow runs in Argo Web UI where every step is run as a container. You can check the log and artifact generated by clicking on each step.

## Create and Run Your Custom CI Workflow

### Create your YAML files

1.  Create an `.argo` folder under your repository
2.  Copy YAML templates from [https://github.com/argoproj/ci-workflow/](https://github.com/argoproj/ci-workflow/) to your `.argo` folder.
3.  The `axscm_checkout.yaml` file defines a container that Argo provides for checking out code in your AWS S3 bucket which can be accessed by your other workflow steps.
4.  The `axapproval.yaml` file defines a container that Argo provides for sending email for approval.
5.  The `example-policy.yaml` file defines when to trigger your CI workflow.
6.  Customize the `example-workflow-approval.yaml` file by writing your build, test and release containers
7.  The `example-approval-project.yaml` file defines how your project will show up in your Catalog menu. This is optional only if you want it to show up in your Catalog. Otherwise you can run it against your commits in the Timelines menu. You can also see and run all your YAML templates under theTemplates menu.  

### Manually RUN your CI Workflow

1.  Because your Argo installation is integrated with your repo, you can see your commits in Argo Web UI under Timeline menu item
2.  You can select any commit and click "Create a New Job". Select the workflow name, enter values for the input parameters and click Submit
3.  The workflow runs in Argo Web UI where every step is run as a container. You can check the log and artifact generated by clicking on each step. For more details, see [Viewing Job History](../user_guide/timeline/create_job-viewhistory.htm#Viewing)

### Automatically TRIGGER your CI workflow

1.  As mentioned above, the `example-policy.yaml` file defines when to trigger your CI workflow.
2.  From the Argo Web UI, go to Templates menu and search for that policy and click Enabled.
3.  For every commit on that repo, based on the policy template, your CI workflow will get triggered.